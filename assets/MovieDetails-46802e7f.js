import{U as f,a as u,r as j,j as s,L as g,A as y}from"./index-66ce40dc.js";import{u as o,b as N,d as v}from"./api-280edaf0.js";import{f as b,B as w}from"./index.esm-da8fea55.js";import{U as L,T as M}from"./UseSlider-8a8a88ba.js";function T(){var c;const{dispatch:m,watchedList:r}=f();console.log(r);const{id:i}=u(),x=r.filter(l=>l.id===i).length>0,{data:e,isLoading:a,error:n}=o({queryFn:()=>N(i),queryKey:["movieDetails",i]}),{data:t,isLoading:h}=o({queryFn:()=>v(i),queryKey:["simMovie",i]});if(j.useEffect(()=>{localStorage.setItem("movieapp",JSON.stringify(r))},[r]),n)return s.jsx("div",{className:" flex justify-center items-center my-10",children:s.jsxs("h2",{className:" text-omar text-xl font-bold ",children:["Error : ",n.message]})});function p(){const l={id:i,title:e==null?void 0:e.title,poster:e==null?void 0:e.poster,runtime:e==null?void 0:e.runtime,year:e==null?void 0:e.year,rating:e==null?void 0:e.ratings[0].value,votes:e==null?void 0:e.ratings[0].votes,trailer:e==null?void 0:e.trailer,lang:e==null?void 0:e.spoken_language,description:e==null?void 0:e.description,country:e==null?void 0:e.country};m({type:"addMovie",payload:l})}return a||h?s.jsx("div",{className:" flex items-center justify-center",children:s.jsx(g,{})}):s.jsxs("div",{className:" font-abc  max-w-6xl text-white h-fit  px-20 mx-auto ",children:[s.jsxs("div",{className:" my-20  w-full  gap-4  md:w-2/3 h-auto grid grid-cols-1 md:grid-cols-3  ",children:[s.jsx("div",{className:" flex justify-center items-center  w-full",children:s.jsx("img",{className:" w-full",src:e==null?void 0:e.poster,alt:`${e==null?void 0:e.title}img`})}),s.jsxs("div",{className:" px-5 col-span-2 flex flex-col gap-2",children:[s.jsx("h1",{className:" capitalize text-2xl font-semibold",children:e==null?void 0:e.title}),s.jsxs("h3",{children:["Name: ",s.jsxs("span",{className:"  text-omar",children:[" ",e==null?void 0:e.title]})]}),s.jsxs("h3",{children:["Time:"," ",s.jsxs("span",{className:"  text-omar",children:[" ",b(e==null?void 0:e.runtime)]})]}),s.jsxs("h3",{children:["Date: ",s.jsxs("span",{className:"  text-omar",children:[" ",e==null?void 0:e.year]})]}),s.jsxs("h3",{children:["Language:"," ",s.jsxs("span",{className:" capitalize  text-omar",children:[" ",e==null?void 0:e.spoken_language]})]}),s.jsxs("h3",{children:["country :"," ",s.jsxs("span",{className:" capitalize  text-omar",children:[" ",e==null?void 0:e.country]})]}),s.jsxs("h3",{className:" flex items-center gap-1",children:[s.jsx(y,{color:"yellow"})," :"," ",s.jsxs("span",{className:" capitalize  font-semibold  text-omar",children:[" ",e==null?void 0:e.ratings[0].value," |"]}),s.jsxs("span",{className:" capitalize  font-semibold  text-omar",children:[" ",e==null?void 0:e.ratings[0].votes]})]}),s.jsxs("div",{className:"  flex items-center gap-4",children:[s.jsxs("a",{className:" inline-flex gap-1 items-center px-4 py-2 md:py-2 md:px-6 w-fit my-2 rounded-full text-white bg-omar",href:e==null?void 0:e.trailer,target:"_blank",rel:"noopener noreferrer",children:[" ",s.jsx("span",{className:" text-2xl",children:s.jsx(w,{})})," ","Watch"]}),x?s.jsx("h2",{className:" text-lg  font-semibold",children:"this movie is already in The watched list"}):s.jsx("button",{onClick:p,className:" md:px-5 px-4  md:py-2  bg-gray-900 font-semibold md:text-lg outline outline-black shadow-2xl  text-white  rounded-full",children:"Add to watchList"})]})]})]}),s.jsxs("div",{className:" flex flex-col gap-4 ",children:[s.jsx("h3",{className:" text-xl font-semibold",children:"About the movie"}),s.jsx("p",{className:" text-sm text-gray-300",children:e==null?void 0:e.description})]}),s.jsxs("div",{className:"  py-6 ",children:[s.jsx("h2",{className:" text-omar text-xl font-bold",children:"recommended"}),s.jsx(L,{slides:4,children:(c=t==null?void 0:t.movie_results)==null?void 0:c.map((l,d)=>s.jsx("div",{className:" flex gap-5 justify-center mx-auto  text-center py-2 space-x-5 items-center",children:s.jsx(M,{movie:l})},d))})]})]})}export{T as default};
